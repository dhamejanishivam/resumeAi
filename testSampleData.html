<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Submit Resume</title>
</head>
<body>
  Hi
  <br>
    <button id="submitButton">Submit Resume</button>
    <div id="responseMessage"></div>

    <script>
      const backendUrl = "http://127.0.0.1:5000//api/resume";
      
        const data23 = {
            name: "error is me",
            email: "dhamejanishivam@gmail.com",
            phone: "+91 9644971120",
            location: "Raipur",
            objective:
              "I want to be billionaire " +
              "Seeking opportunities to apply my expertise in building innovative solutions while continuously " +
              "learning and contributing to dynasdasdsadsdasdasdasdamic projects.",
            work_experience: [
              {
                title: "God â€¢ Internship",
                company: "Thought Applied Creation, Raipur",
                duration: "Jul 2024 - Aug 2024",
                description:
                  "Built a ABasaaaaaaaaaaaaaaaaaaaaaaC website linked to a database using React, HTML, CSS, JavaScript, PHP, " +
                  "and MySQL.",
              },
            ],
            education: [
              {
                degree: "B1111111.Tech, Compu11ter Science & Engineering",
                year: "2022 - 20261111",
                institution:
                  "Shri Shankaracharya Institute Of Professional Management And Technoaaaaaaaaaaaaaaaaaaaalogy",
              },
              {
                degree: "Senior Secondary (XII), CBSE",
                year: "2022",
                institution: "Krishna Public School",
              },
              {
                degree: "Secondasdasdasary (X), CBSE",
                year: "2020",
                institution: "Kriasdasdshna Public School",
              },
            ],
            projects: [
              "https://shivamdhamejani.in",
              "https://github.com/dhamejanishivam",
              "https://github.com/dhamejanishivam/Heart-Disease-Predictor",
              "https://github.com/dhamejanishivam/pendrive-virus",
            ],
            skills: [
              "JavaScript",
              "Pythonsdadas",
              "Photography",
              "HTML&CSS",
              "C Programming",
              "C++ Programming",
              "Linux",
              "MS-Excel",
              "Digital Marketing",
              "SQL",
              "Data Structures",
            ],
            additional_details: [
              "Green Olympiad",
              "2nd position in Spell Bee Competition",
              "1st position in Best Out of Waste competition",
            ],
        };

        

        async function submitResume(data) {
          try {
  const response = await fetch(backendUrl, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(data),
  });

  if (response.ok) {
    // Handle successful response and trigger the file download
    const blob = await response.blob();
    const url = window.URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = "resume.pdf";  // You can set the filename as needed
    a.click();

    // Clean up the URL object after the download
    window.URL.revokeObjectURL(url);
    alert("Resume generated and downloading...");
  } else {
    const errorText = await response.text();
    console.error("Error response text:", errorText);
    alert("Failed to generate resume. Server responded with an error.");
  }
} catch (error) {
  console.error("Error:", error);
  alert("An error occurred while generating the resume!");
}

        }

        // Event listener for the button
        document.getElementById('submitButton').addEventListener('click', () => {
            submitResume(data23);
        });
    </script>
</body>
</html>
